!function(a,b){'object'==typeof exports?module.exports=b(a,require('jquery'),require('bootstrap')):'function'==typeof define&&define.amd?define(['jquery','bootstrap'],function(c){return b(a,c)}):b(a,a.jQuery)}(this,function(a,b,c){var d=function(a,c){this.defaults=b.extend(this.defaults,c),this.container=a,this.initialize(a)};d.prototype={defaults:{value:0,minValue:20,maxValue:100,bindField:null,errorTip:'top',callback:function(a){}},container:null,initialize:function(a){if(!(this.defaults.value>this.defaults.maxValue)){this.defaults.value<this.defaults.minValue&&(this.defaults.value=this.defaults.minValue),a.append("<div class=\"ue-scroll-bar\"><div class=\"ue-scroll-track\"></div><div class=\"ue-scroll-thumb\"></div></div>");var c=a.find(".ue-scroll-thumb").width(),d=(a.find(".ue-scroll-bar").width()-c)*((this.defaults.value-this.defaults.minValue)/(this.defaults.maxValue-this.defaults.minValue));a.find(".ue-scroll-track").css("width",d+"px"),a.find(".ue-scroll-thumb").css("margin-left",d-1+"px"),this.setValue(a),b(this.defaults.bindField).val(this.defaults.value);var e=this;b(this.defaults.bindField).on("input change",function(d){var f=b(this).val(),g=null;if(isNaN(f))g="只能输入数字";else if(f>=e.defaults.minValue&&f<=e.defaults.maxValue){b(this).popover('destroy'),e.defaults.value=f;var h=(a.find(".ue-scroll-bar").width()-c)*((e.defaults.value-e.defaults.minValue)/(e.defaults.maxValue-e.defaults.minValue));a.find(".ue-scroll-track").css("width",h+"px"),a.find(".ue-scroll-thumb").css("margin-left",h-1+"px")}else g="不在取值范围";if(g){var i=b(this).data('bs.popover');i&&(i.tip().remove(),b(this).removeData('bs.popover')),b(this).popover({content:g,placement:e.defaults.errorTip,trigger:"manual"}).popover("show")}})}},setValue:function(a){var c,d=!1,e=this,f=this.container.find(".ue-scroll-thumb"),g=this.container.find(".ue-scroll-track"),h=this.container.find(".ue-scroll-bar");f.mousedown(function(){d=!0,b(document.body).mousemove(function(i){0!=d&&(f.addClass('selected'),c=i.clientX-h.offset().left,f.css("margin-left",c+"px"),g.css("width",c+"px"),a.siblings("input").val(e.defaults.value),b(e.defaults.bindField).popover("destroy"),c+parseInt(f.width())>=h.width()?(f.css("margin-left",h.width()-parseInt(f.width())-1+"px"),g.css("width",h.width()+"px"),e.defaults.value=e.defaults.maxValue):c<=0?(f.css("margin-left","-1px"),g.css("width","0px"),e.defaults.value=e.defaults.minValue):e.defaults.value=Math.round((e.defaults.maxValue-e.defaults.minValue)*c/(h.width()-f.width()))+e.defaults.minValue,e.defaults.callback&&e.defaults.callback(e.defaults.value))})}),b(document.body).mouseup(function(){d=!1,f.removeClass('selected'),e.defaults.value=Math.round(100*(c/h.width())),e.defaults.value>=e.defaults.maxValue&&(e.defaults.value=e.defaults.maxValue),e.defaults.value<=e.defaults.minValue&&(e.defaults.value=e.defaults.minValue)})}},b.fn.scrollbar=function(a){new d(b(this),a)}});