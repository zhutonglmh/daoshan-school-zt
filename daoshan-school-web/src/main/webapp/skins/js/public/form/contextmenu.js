!function(a,b){'object'==typeof exports?module.exports=b(a,require('jquery')):'function'==typeof define&&define.amd?define(['jquery'],function(c){return b(a,c)}):b(a,a.jQuery)}(this,function(a,b,c){'use strict';var d='[data-toggle="context"]',e=function(a,c){this.$element=b(a),this.before=c.before||this.before,this.onItem=c.onItem||this.onItem,this.scopes=c.scopes||null,c.target&&this.$element.data('target',c.target),this.listen()};e.prototype={constructor:e,show:function(a){var c,d,e,f,g={relatedTarget:this,target:a.currentTarget};if(!this.isDisabled()&&(this.closemenu(),this.before.call(this,a,b(a.currentTarget))!==!1))return c=this.getMenu(),c.trigger(d=b.Event('show.bs.context',g)),e=this.getPosition(a,c),f='li:not(.divider)',c.attr('style','').css(e).addClass('open').on('click.context.data-api',f,b.proxy(this.onItem,this,b(a.currentTarget))).trigger('shown.bs.context',g),b('html').on('click.context.data-api',c.selector,b.proxy(this.closemenu,this)),!1},closemenu:function(a){var c,d,e,f;c=this.getMenu(),c.hasClass('open')&&(f={relatedTarget:this},c.trigger(d=b.Event('hide.bs.context',f)),e='li:not(.divider)',c.removeClass('open').off('click.context.data-api',e).trigger('hidden.bs.context',f),b('html').off('click.context.data-api',c.selector),a.stopPropagation())},keydown:function(a){27==a.which&&this.closemenu(a)},before:function(a){return!0},onItem:function(a){return!0},listen:function(){this.$element.on('contextmenu.context.data-api',this.scopes,b.proxy(this.show,this)),b('html').on('click.context.data-api',b.proxy(this.closemenu,this)),b('html').on('keydown.context.data-api',b.proxy(this.keydown,this))},destroy:function(){this.$element.off('.context.data-api').removeData('context'),b('html').off('.context.data-api')},isDisabled:function(){return this.$element.hasClass('disabled')||this.$element.attr('disabled')},getMenu:function(){var a,c=this.$element.data('target');return c||(c=this.$element.attr('href'),c=c&&c.replace(/.*(?=#[^\s]*$)/,'')),a=b(c),a&&a.length?a:this.$element.find(c)},getPosition:function(c,d){var e,f,g,h=c.clientX,i=c.clientY,j=b(a).width(),k=b(a).height(),l=d.find('.dropdown-menu').outerWidth(),m=d.find('.dropdown-menu').outerHeight(),n={position:"absolute","z-index":9999};return e=i+m>k?{top:i-m+b(a).scrollTop()}:{top:i+b(a).scrollTop()},f=h+l>j&&h-l>0?{left:h-l+b(a).scrollLeft()}:{left:h+b(a).scrollLeft()},g=d.offsetParent().offset(),f.left=f.left-g.left,e.top=e.top-g.top,b.extend(n,e,f)}},b.fn.contextmenu=function(a,c){return this.each(function(){var d=b(this),f=d.data('context'),g='object'==typeof a&&a;f||d.data('context',f=new e(d,g)),'string'==typeof a&&f[a].call(f,c)})},b.fn.contextmenu.Constructor=e,b(document).on('contextmenu.context.data-api',function(){b(d).each(function(){var a=b(this).data('context');a&&a.closemenu()})}).on('contextmenu.context.data-api',d,function(a){b(this).contextmenu('show',a),a.preventDefault(),a.stopPropagation()})});